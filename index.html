<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>Système Suisse - Appariements</title>
  <style>
    body { font-family: sans-serif; padding: 20px; }
    table, th, td { border: 1px solid black; border-collapse: collapse; padding: 5px; }
    input[type=number] { width: 60px; }
  </style>
</head>
<body>

<h1>Appariements Système Suisse</h1>

<h2>Joueurs et points (modifiable)</h2>
<table id="joueursTable">
  <tr><th>Nom</th><th>Points</th></tr>
</table>
<button onclick="mettreAJourPoints()">Mettre à jour points</button>

<h2>Appariements proposés</h2>
<div id="appariements"></div>
<button onclick="genererAppariements()">Générer appariements</button>

<script>
let joueurs = [
  { nom: "Cipriane", pts: 1 },
  { nom: "Amina", pts: 1 },
  { nom: "Mohamed", pts: 1 },
  { nom: "Hamza M", pts: 1 },
  { nom: "Badr", pts: 1 },
  { nom: "Ritéj", pts: 1 },
  { nom: "Redjana", pts: 1 },
  { nom: "Souana", pts: 1 },
  { nom: "Gaël K", pts: 0.5 },
  { nom: "Soulayman B", pts: 0.5 },
  { nom: "Amira", pts: 0.5 },
  { nom: "Soulayman", pts: 0 },
  { nom: "Hamza", pts: 0 },
  { nom: "Inaya", pts: 0 },
  { nom: "Marieta", pts: 0 },
  { nom: "Joud", pts: 0 },
  { nom: "Noémie", pts: 0 },
  { nom: "Lili", pts: 0 },
  { nom: "Candice", pts: 0 }
];

let rencontres = {};
for (let j of joueurs) {
  rencontres[j.nom] = new Set();
}

function afficherJoueurs() {
  let table = document.getElementById("joueursTable");
  table.innerHTML = "<tr><th>Nom</th><th>Points</th></tr>";
  for (let j of joueurs) {
    table.innerHTML += `<tr>
      <td>${j.nom}</td>
      <td><input type="number" step="0.5" value="${j.pts}" data-nom="${j.nom}"></td>
    </tr>`;
  }
}

function mettreAJourPoints() {
  let inputs = document.querySelectorAll("#joueursTable input");
  inputs.forEach(input => {
    let nom = input.dataset.nom;
    let val = parseFloat(input.value);
    let joueur = joueurs.find(j => j.nom === nom);
    if (!isNaN(val)) joueur.pts = val;
  });
  alert("Points mis à jour !");
}

function genererAppariements() {
  let dispo = [...joueurs].sort((a,b) => b.pts - a.pts);
  let appariements = [];

  while (dispo.length > 1) {
    let j1 = dispo.shift();
    let index = dispo.findIndex(j2 => !rencontres[j1.nom].has(j2.nom));
    if (index === -1) index = 0;
    let j2 = dispo.splice(index,1)[0];

    appariements.push(`${j1.nom} (${j1.pts}) vs ${j2.nom} (${j2.pts})`);
    rencontres[j1.nom].add(j2.nom);
    rencontres[j2.nom].add(j1.nom);
  }

  if (dispo.length === 1) {
    appariements.push(`${dispo[0].nom} (${dispo[0].pts}) exempt`);
  }

  document.getElementById("appariements").innerHTML = appariements.join("<br>");
}

afficherJoueurs();
</script>

</body>
</html>
